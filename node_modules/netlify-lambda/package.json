{
  "_from": "netlify-lambda",
  "_id": "netlify-lambda@2.0.1",
  "_inBundle": false,
  "_integrity": "sha512-5Yel8NlIEV+2KBAmUISeQqjrLW71n2VwWjoUFRJZuGpbD2Omn/4kgLUm/T4A7swrxygQMhtKDkZs1WXNUZP/ow==",
  "_location": "/netlify-lambda",
  "_phantomChildren": {
    "@babel/code-frame": "7.10.4",
    "@babel/generator": "7.11.0",
    "@babel/helper-module-transforms": "7.11.0",
    "@babel/helpers": "7.10.4",
    "@babel/template": "7.10.4",
    "@babel/traverse": "7.11.0",
    "@babel/types": "7.11.0",
    "@nodelib/fs.walk": "1.2.4",
    "@xtuc/ieee754": "1.2.0",
    "@xtuc/long": "4.2.2",
    "ajv": "6.12.3",
    "ajv-errors": "1.0.1",
    "ajv-keywords": "3.5.2",
    "arr-diff": "4.0.0",
    "arr-flatten": "1.1.0",
    "array-unique": "0.3.2",
    "bluebird": "3.7.2",
    "chownr": "1.1.4",
    "chrome-trace-event": "1.0.2",
    "convert-source-map": "1.7.0",
    "debug": "4.1.1",
    "define-property": "2.0.2",
    "enhanced-resolve": "4.3.0",
    "esrecurse": "4.2.1",
    "estraverse": "4.3.0",
    "extend-shallow": "3.0.2",
    "extglob": "2.0.4",
    "figgy-pudding": "3.5.2",
    "find-cache-dir": "2.1.0",
    "fragment-cache": "0.2.1",
    "gensync": "1.0.0-beta.1",
    "glob": "7.1.6",
    "glob-parent": "5.1.1",
    "graceful-fs": "4.2.4",
    "infer-owner": "1.0.4",
    "is-buffer": "1.1.6",
    "is-extendable": "0.1.1",
    "is-wsl": "1.1.0",
    "isobject": "3.0.1",
    "json-parse-better-errors": "1.0.2",
    "json5": "2.1.3",
    "loader-runner": "2.4.0",
    "loader-utils": "1.4.0",
    "lodash": "4.17.19",
    "lru-cache": "5.1.1",
    "memory-fs": "0.4.1",
    "merge2": "1.4.1",
    "mississippi": "3.0.0",
    "mkdirp": "0.5.5",
    "move-concurrently": "1.0.1",
    "nanomatch": "1.2.13",
    "neo-async": "2.6.2",
    "node-libs-browser": "2.2.1",
    "object.pick": "1.3.0",
    "picomatch": "2.2.2",
    "promise-inflight": "1.0.1",
    "randombytes": "2.1.0",
    "regex-not": "1.0.2",
    "repeat-element": "1.1.3",
    "repeat-string": "1.6.1",
    "resolve": "1.15.0",
    "rimraf": "2.6.3",
    "snapdragon": "0.8.2",
    "snapdragon-node": "2.1.1",
    "source-map": "0.5.7",
    "split-string": "3.1.0",
    "tapable": "1.1.3",
    "terser": "4.8.0",
    "to-regex": "3.0.2",
    "unique-filename": "1.1.1",
    "watchpack": "1.7.4",
    "webpack-sources": "1.4.3",
    "worker-farm": "1.7.0",
    "y18n": "4.0.0"
  },
  "_requested": {
    "escapedName": "netlify-lambda",
    "fetchSpec": "latest",
    "name": "netlify-lambda",
    "raw": "netlify-lambda",
    "rawSpec": "",
    "registry": true,
    "saveSpec": null,
    "type": "tag"
  },
  "_requiredBy": [
    "#USER",
    "/"
  ],
  "_resolved": "https://registry.npmjs.org/netlify-lambda/-/netlify-lambda-2.0.1.tgz",
  "_shasum": "8be3594a871f72dc18414ed8b0a01ed79724356b",
  "_spec": "netlify-lambda",
  "_where": "/mnt/c/Users/hulas/Desktop/mediabite360/client",
  "author": {
    "name": "Mathias Biilmann Christensen"
  },
  "bin": {
    "netlify-lambda": "bin/cmd.js"
  },
  "bugs": {
    "url": "https://github.com/netlify/netlify-lambda/issues"
  },
  "bundleDependencies": false,
  "dependencies": {
    "@babel/core": "^7.10.4",
    "@babel/plugin-proposal-class-properties": "^7.10.4",
    "@babel/plugin-proposal-object-rest-spread": "^7.10.4",
    "@babel/plugin-transform-object-assign": "^7.10.4",
    "@babel/preset-env": "^7.10.4",
    "babel-loader": "^8.1.0",
    "body-parser": "^1.19.0",
    "commander": "^5.1.0",
    "express": "^4.17.1",
    "express-logging": "^1.1.1",
    "globby": "^11.0.1",
    "jwt-decode": "^2.2.0",
    "toml": "^3.0.0",
    "webpack": "^4.43.0",
    "webpack-merge": "^4.2.2"
  },
  "deprecated": false,
  "description": "Build and serve lambda function with webpack compilation",
  "devDependencies": {
    "@commitlint/cli": "^9.0.0",
    "@commitlint/config-conventional": "^9.0.0",
    "auto-changelog": "^2.2.0",
    "eslint": "^7.0.0",
    "gh-release": "^3.5.0",
    "husky": "^4.0.7",
    "jest": "^26.1.0",
    "node-fetch": "^2.6.0",
    "prettier": "^2.0.0",
    "rimraf": "^3.0.2"
  },
  "engines": {
    "node": ">=v10.21.0"
  },
  "files": [
    "!lib/*.spec.js",
    "bin/*.js",
    "lib/*.js"
  ],
  "homepage": "https://github.com/netlify/netlify-lambda#readme",
  "husky": {
    "hooks": {
      "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
    }
  },
  "license": "MIT",
  "main": "bin/cmd.js",
  "name": "netlify-lambda",
  "optionalDependencies": {},
  "readme": "## Netlify Lambda\n\nThis is an optional tool that helps with building or locally developing [Netlify Functions](https://www.netlify.com/docs/functions/?utm_source=github&utm_medium=swyx-netlify-lambda&utm_campaign=devex) with a simple webpack/babel build step. For function folders, there is also a small utility to install function folder dependencies.\n\nThe goal is to make it easy to write Lambda's with transpiled JS/TypeScript features and imported modules.\n\n<details>\n  <summary><b>Multiple ways to deploy functions on Netlify</b></summary>\n\nThere are 3 ways to deploy functions to Netlify:\n\n1. each function as a single JS or Go file, possibly bundled by a build tool like `netlify-lambda` or `tsc`\n2. each function as a zip of a folder of files\n3. as of [CLI v2.7](https://www.netlify.com/docs/cli/#unbundled-javascript-function-deploys?utm_source=github&utm_medium=swyx-netlify-lambda&utm_campaign=devex), a non-bundled, non-zipped, folder of files.\n\n`Netlify-Lambda` uses webpack to bundle up your functions and their dependencies for you, suiting the first approach. However, if you have native node modules (or other dependencies that don't expect to be bundled like [the Firebase SDK](https://github.com/netlify/netlify-lambda/issues/112)) then you may want to try the other approaches. In particular, try [`Netlify Dev`](https://www.netlify.com/docs/cli/?utm_source=github&utm_medium=swyx-jamstack&utm_campaign=devex#netlify-dev-beta).\n\nIf this sounds confusing, support is available through [our regular channels](https://www.netlify.com/support/?utm_source=github&utm_medium=swyx-netlify-lambda&utm_campaign=devex).\n\n</details>\n\n\n### When to use Netlify Dev or `netlify-lambda` or both?\n\n<details>\n  <summary><a href=\"https://www.netlify.com/docs/cli/?utm_source=github&utm_medium=swyx-jamstack&utm_campaign=devex#netlify-dev-beta\">Netlify Dev</a> is incrementally adoptable. <b>Use `netlify-lambda` only if you need a build step for your functions.</b> Expand this to read more on when to use either or both</summary>\n\n\n- **When to use Netlify Dev**: Part of Netlify Dev serves unbundled function folders through [zip-it-and-ship-it](https://github.com/netlify/zip-it-and-ship-it) with no build step. This is likely to be attractive to many users who previously just needed `netlify-lambda` for bundling multi-file functions or functions with node_module dependencies.\n- **When to use Netlify Lambda**: However, if you need a build step for your functions (e.g. for webpack import/export syntax, running babel transforms or typescript), you can use `netlify-lambda`, `tsc` or your own build tool to do this, just point Netlify Dev at your build output with the `functions` field in `netlify.toml`.\n- These responsibilities aren't exactly the same. Therefore **you can use Netlify Dev and Netlify Lambda together** to have BOTH a build step for functions from `netlify-lambda` and the full proxy environment from Netlify Dev. If you have a npm script in `package.json` for running `netlify-lambda serve ${functionsSourceFolder}`, Netlify Dev will [detect it](https://github.com/netlify/netlify-dev-plugin#function-builders-function-builder-detection-and-relationship-with-netlify-lambda) and run it for you. This way, **existing `netlify-lambda` users will be able to use Netlify Dev with no change to their workflow**\n\nFunction Builder detection is a very new feature with only simple detection logic for now, that we aim to improve over time. If it doesn't work well for you, you can simply not use Netlify Dev for now while we work out all your bug reports. üôèüèº\n\n**You can see how to convert a Netlify-Lambda project to Netlify Dev as well as why and how they work together in [this 48 min video here](https://www.youtube.com/watch?v=sakKOT6nkkE)**\n\n</details>\n\n## Installation\n\n**We recommend installing locally** rather than globally:\n\n```bash\nnpm install netlify-lambda\n```\n\nThis will ensure your build scripts don't assume a global install which is better for your CI/CD (for example with Netlify's buildbot).\n\nIf you don't have a [`netlify.toml`](https://www.netlify.com/docs/netlify-toml-reference/?utm_source=github&utm_medium=swyx-netlify-lambda&utm_campaign=devex) file, you'll need one ([example](https://github.com/netlify/create-react-app-lambda/blob/master/netlify.toml)). Define the `functions` field where the functions will be built to and served from, e.g.\n\n```toml\n# example netlify.toml\n[build]\n  command = \"npm run build\"\n  functions = \"lambda\" #  netlify-lambda reads this\n  publish = \"build\"\n```\n\n## Usage\n\nWe expose three commands:\n\n```bash\nnetlify-lambda build <folder>\nnetlify-lambda install [folder]\n\n## legacy command - only preserved for backward compatibility\nnetlify-lambda serve <folder> \n```\n\n### `netlify-lambda install`\n\nSometimes your function folders will have dependencies unique to them, managed by a package.json local to that folder. This is a small utility function for installing those dependencies either on your local machine or as part of your build commands.\n\nBy default it just runs on the functions folder specified in `netlify.toml`. Here's all you need to add to your `package.json` (see [this example](https://github.com/sw-yx/gatsby-netlify-form-example-v2/commit/f88462a4c37b5ddcdf5f394606ac14b58d6b475d#diff-b9cfc7f2cdf78a7f4b91a753d10865a2)):\n\n```js\n// package.json\n{\n   \"dependencies\": { // you probably don't want it in devDependencies! This is a common gotcha https://www.netlify.com/docs/build-gotchas/#devdependencies\n       \"netlify-lambda\": \"^1.6.0\"\n   },\n   \"scripts\": {\n       \"postinstall\": \"netlify-lambda install\"\n   }\n}\n```\n\nThis is what you should do if you are just using Netlify Dev without `netlify-lambda`.\n\nIf you're using `netlify-lambda serve` or `build`, however, you will want to run this install on the _source_ folder rather than the _dist_/netlify.toml functions folder, so you should run it with the same exact folder name as with those other commands:\n\n```bash\nnetlify-lambda install <folderName>\n```\n\nWe don't anticipate you will use this as often but it can be handy.\n\n### `netlify-lambda build`\n\nAt a high level, `netlify-lambda` takes a source folder (e.g. `src/lambda`, specified in your command) and outputs it to a built folder, (e.g. `built-lambda`, specified in your `netlify.toml` file).\n\nThe `build` function will run a single build of the functions in the folder.\n\nThe `serve` function will start a dev server for the source folder and route requests with a `.netlify/functions/` prefix, with a default port of `9000`:\n\n```\nfolder/hello.js -> http://localhost:9000/.netlify/functions/hello\n```\n\nIt also watches your files and restarts the dev server on change. Note: if you add a new file you should kill and restart the process to pick up the new file.\n\n**IMPORTANT**:\n\n- You need a [`netlify.toml`](https://www.netlify.com/docs/netlify-toml-reference/?utm_source=github&utm_medium=swyx-netlify-lambda&utm_campaign=devex) file with a `functions` field.\n- Every function needs to be a top-level js/ts/mjs file. You can have subfolders inside the `netlify-lambda` folder, but those are only for supporting files to be imported by your top level function. Files that end with `.spec.*` or `.test.*` will be ignored so you can [colocate your tests](https://github.com/netlify/netlify-lambda/issues/99).\n- Function signatures follow the [AWS event handler](https://docs.aws.amazon.com/lambda/latest/dg/nodejs-prog-model-handler.html) syntax but must be named `handler`. [We use Node v8](https://www.netlify.com/blog/2018/04/03/node.js-8.10-now-available-in-netlify-functions/?utm_source=github&utm_medium=swyx-netlify-lambda&utm_campaign=devex) so `async` functions **are** supported ([beware common mistakes](https://serverless.com/blog/common-node8-mistakes-in-lambda/)!). Read [Netlify Functions docs](https://www.netlify.com/docs/functions/#javascript-lambda-functions?utm_source=github&utm_medium=swyx-netlify-lambda&utm_campaign=devex) for more info.\n- Functions [time out in 10 seconds](https://www.netlify.com/docs/functions/#custom-deployment-options) by default although extensions can be requested. We [try to replicate this locally](https://github.com/netlify/netlify-lambda/pull/116).\n\n<details>\n  <summary><b>Environment variables in build and branch context</b></summary>\n\nRead Netlify's [documentation on environment variables](https://www.netlify.com/docs/continuous-deployment/#build-environment-variables?utm_source=github&utm_medium=swyx-netlify-lambda&utm_campaign=devex).\n`netlify-lambda` should respect the env variables you supply in `netlify.toml` accordingly (except for deploy previews, which make no sense to locally emulate).\n\nHowever, this is a [relatively new feature](https://github.com/netlify/netlify-lambda/issues/59), so if you encounter issues, file one.\n\nIf you need local-only environment variables that you don't place in `netlify.toml` for security reasons, you can configure webpack to use a `.env` file [like in this example](https://github.com/netlify/netlify-lambda/issues/118).\n\n</details>\n\n  <summary>\n    <b>Lambda function examples</b>\n  </summary>\n  If you are new to writing Lambda functions, this section may help you. Function signatures should conform to one of either two styles. Traditional callback style:\n  \n  ```js\n// legacy callback style - not encouraged anymore, but you'll still see examples doing this\nexports.handler = function(event, context, callback) {\n  // your server-side functionality\n  callback(null, {\n    statusCode: 200,\n    body: JSON.stringify({\n      message: `Hello world ${Math.floor(Math.random() * 10)}`\n    })\n  });\n};\n  ```\n  \n  or you can use async/await:\n  \n  ```js\n// modern JS style - encouraged\nexport async function handler(event, context) {\n    return {\n      statusCode: 200,\n      body: JSON.stringify({ message: `Hello world ${Math.floor(Math.random() * 10)}` })\n    };\n}\n  ```\n> :warning: The above example only works with `netlify-lambda` because [it uses ES module syntax](https://community.netlify.com/t/async-await-lambda-function-example/6976/3)! If you get `Function invocation failed: SyntaxError: Unexpected token 'export'.` errors, this is why.\n  \n  For more Functions examples, check:\n  \n  - https://functions-playground.netlify.com/ (introductory)\n  - https://functions.netlify.com/examples/ (our firehose of all functions examples)\n  - the blogposts at the bottom of this README\n  \n  </details>\n\n### `netlify-lambda serve` (legacy command)\n\nThis command is pretty much superceded by Netlify Dev. We only keep it around for legacy/backward compatibility support reasons.\n\n#### `netlify-lambda serve` (legacy command): Using with `create-react-app`, Gatsby, and other development servers\n\n<details>\n<summary><b>Why you need to proxy (for beginners)</b></summary>\n\n`react-scripts` (the underlying library for `create-react-app`) and other popular development servers often set up catchall serving for you; in other words, if you try to request a route that doesn't exist, the dev server will try to serve you `/index.html`. This is problematic when you are trying to hit a local API endpoint like `netlify-lambda` sets up for you - your browser will attempt to parse the `index.html` file as JSON. This is why you may see this error:\n\n`Uncaught (in promise) SyntaxError: Unexpected token < in JSON at position 0`\n\nIf this desribes your situation, then you need to proxy for local development. Read on. Don't worry it's easier than it looks.\n\n</details>\n\n#### `netlify-lambda serve` (legacy command): Proxying for local development\n\n> ‚ö†Ô∏èIMPORTANT! PLEASE READ THIS ESPECIALLY IF YOU HAVE CORS ISSUES‚ö†Ô∏è\n\nWhen your function is deployed on Netlify, it will be available at `/.netlify/functions/function-name` for any given deploy context. It is advantageous to proxy the `netlify-lambda serve` development server to the same path on your primary development server.\n\nSay you are running `webpack-serve` on port 8080 and `netlify-lambda serve` on port 9000. Mounting `localhost:9000` to `/.netlify/functions/` on your `webpack-serve` server (`localhost:8080/.netlify/functions/`) will closely replicate what the final production environment will look like during development, and will allow you to assume the same function url path in development and in production.\n\n- If you are using with `create-react-app`, see [netlify/create-react-app-lambda](https://github.com/netlify/create-react-app-lambda/blob/f0e94f1d5a42992a2b894bfeae5b8c039a177dd9/src/setupProxy.js) for an example of how to do this with `create-react-app`. [setupProxy is partially documented in the CRA docs](https://facebook.github.io/create-react-app/docs/proxying-api-requests-in-development#configuring-the-proxy-manually). You can also learn how to do this from scratch in a video: https://www.youtube.com/watch?v=3ldSM98nCHI\n- If you are using Gatsby, see [their Advanced Proxying docs](https://www.gatsbyjs.org/docs/api-proxy/#advanced-proxying). This is implemented in the [JAMstack Hackathon Starter](https://github.com/sw-yx/jamstack-hackathon-starter).\n- If you are using React-Static, check https://github.com/nozzle/react-static/issues/380.\n- If you are using Nuxt.js, see [this issue for how to proxy](https://github.com/netlify/netlify-lambda/pull/28#issuecomment-439675503).\n- If you are using Vue CLI, you may just use https://github.com/netlify/vue-cli-plugin-netlify-lambda/.\n- If you are using with Angular CLI, see the instructions below.\n\n[Example webpack config](https://github.com/imorente/netlify-functions-example/blob/master/webpack.development.config):\n\n```js\nmodule.exports = {\n  mode: \"development\",\n  devServer: {\n    proxy: {\n      \"/.netlify\": {\n        target: \"http://localhost:9000\",\n        pathRewrite: { \"^/.netlify/functions\": \"\" }\n      }\n    }\n  }\n};\n```\n\n<details>\n  <summary>\n    <b>Using with <code>Angular CLI</code></b>\n  </summary>\n\nCORS issues when trying to use netlify-lambdas locally with angular? you need to set up a proxy.\n\nFirstly make sure you are using relative paths in your app to ensure that your app will work locally and on Netlify, example below...\n\n```js\nthis.http.get(\"/.netlify/functions/jokeTypescript\");\n```\n\nThen place a `proxy.config.json` file in the root of your project, the contents should look something like...\n\n```json\n{\n  \"/.netlify/functions/*\": {\n    \"target\": \"http://localhost:9000\",\n    \"secure\": false,\n    \"logLevel\": \"debug\",\n    \"changeOrigin\": true\n  }\n}\n```\n\n- The `key` should match up with the location of your Transpiled `functions` as defined in your `netlify.toml`\n- The `target` should match the port that the lambdas are being served on (:9000 by default)\n\nWhen you run up your Angular project you need to pass in the proxy config with the flag `--proxy-config` like so...\n\n```bash\n  ng serve --proxy-config proxy.config.json\n```\n\nTo make your life easier you can add these to your `scripts` in `package.json`\n\n```json\n  \"scripts\": {\n    \"start\": \"ng serve --proxy-config proxy.config.json\",\n    \"build\": \"ng build --prod --aot && yarn nlb\",\n    \"nls\": \"netlify-lambda serve src_functions\",\n    \"nlb\": \"netlify-lambda build src_functions\"\n  }\n```\n\nObviously you need to run up `netlify-lambda` & `angular` at the same time.\n\n</details>\n<details>\n  <summary>\n    <b>Using with <code>Next.js</code></b>\n  </summary>\n\nNext.js [doesnt use Webpack Dev Server](https://github.com/zeit/next.js/issues/2281), so you can't modify any config in `next.config.js` to get a proxy to run. However, since the CORS proxy issue only happens in dev mode (Functions are on the same domain when deployed on Netlify) you can run Next.js through a Node server for local development:\n\n```js\ntouch server.js\nyarn add -D http-proxy-middleware express\n```\n\n```js\n// server.js\n/* eslint-disable no-console */\nconst express = require(\"express\");\nconst next = require(\"next\");\n\nconst devProxy = {\n  \"/.netlify\": {\n    target: \"http://localhost:9000\",\n    pathRewrite: { \"^/.netlify/functions\": \"\" }\n  }\n};\n\nconst port = parseInt(process.env.PORT, 10) || 3000;\nconst env = process.env.NODE_ENV;\nconst dev = env !== \"production\";\nconst app = next({\n  dir: \".\", // base directory where everything is, could move to src later\n  dev\n});\n\nconst handle = app.getRequestHandler();\n\nlet server;\napp\n  .prepare()\n  .then(() => {\n    server = express();\n\n    // Set up the proxy.\n    if (dev && devProxy) {\n      const proxyMiddleware = require(\"http-proxy-middleware\");\n      Object.keys(devProxy).forEach(function(context) {\n        server.use(proxyMiddleware(context, devProxy[context]));\n      });\n    }\n\n    // Default catch-all handler to allow Next.js to handle all other routes\n    server.all(\"*\", (req, res) => handle(req, res));\n\n    server.listen(port, err => {\n      if (err) {\n        throw err;\n      }\n      console.log(`> Ready on port ${port} [${env}]`);\n    });\n  })\n  .catch(err => {\n    console.log(\"An error occurred, unable to start the server\");\n    console.log(err);\n  });\n```\n\nrun your server and netlify-lambda at the same time:\n\n```js\n// package.json\n  \"scripts\": {\n    \"start\": \"cross-env NODE_ENV=dev npm-run-all --parallel start:app start:server\",\n    \"start:app\": \"PORT=3000 node server.js\",\n    \"start:server\": \"netlify-lambda serve functions\"\n  },\n```\n\nand now you can ping Netlify Functions with locally emulated by `netlify-lambda`!\n\nFor production deployment, you have two options:\n\n- [using `next export` to do static HTML export](https://nextjs.org/docs/#static-html-export)\n- [using the Next.js 8 `serverless` target option](https://nextjs.org/blog/next-8/#serverless-nextjs) to run your site in a function as well.\n\nJust remember to configure your `netlify.toml` to point to the `Next.js` build folder and your `netlify-lambda` functions folder accordingly.\n\n</details>\n\n## Webpack Configuration\n\nBy default the webpack configuration uses `babel-loader` to load all js files. Any `.babelrc` in the directory `netlify-lambda` is run from will be respected. If no `.babelrc` is found, a [few basic settings are used](https://github.com/netlify/netlify-lambda/blob/master/lib/build.js#L11-L15a).\n\nIf you need to use additional webpack modules or loaders, you can specify an additional webpack config with the `-c`/`--config` option when running either `serve` or `build`.\n\nFor example, have a file with:\n\n```js\n// webpack.functions.js\nmodule.exports = {\n  optimization: { minimize: false }\n};\n```\n\nThen specify `netlify-lambda serve --config ./webpack.functions.js`. If using VSCode, it is likely that the `sourceMapPathOverrides` have to be adapted for breakpoints to work. Read here for more info on [how to modify the webpack config](https://github.com/netlify/netlify-lambda/issues/64#issuecomment-429625191).\n\nIf you're using firebase SDK and other native modules, check [this issue](https://github.com/netlify/netlify-lambda/issues/112#issuecomment-489072330) and use this plugin:\n\n```\n//./config/webpack.functions.js\nconst nodeExternals = require('webpack-node-externals');\n\nmodule.exports = {\n  externals: [nodeExternals()],\n};\n```\n\nThe additional webpack config will be merged into the default config via [webpack-merge's](https://www.npmjs.com/package/webpack-merge) `merge.smart` method.\n\n### Babel configuration\n\nThe default webpack configuration uses `babel-loader` with a [few basic settings](https://github.com/netlify/netlify-lambda/blob/master/lib/build.js#L19-L33).\n\nHowever, if any `.babelrc` is found in the directory `netlify-lambda` is run from, or [folders above it](https://github.com/netlify/netlify-lambda/pull/92) (useful for monorepos), it will be used instead of the default one.\n\nIt is possible to disable this behaviour by passing `--babelrc false`.\n\nIf you need to run different babel versions for your lambda and for your app, [check this issue](https://github.com/netlify/netlify-lambda/issues/34) to override your webpack babel-loader.\n\n### Use with TypeScript\n\nWe added `.ts` and `.mjs` support recently - [check here for the PR and usage tips](https://github.com/netlify/netlify-lambda/pull/76).\n\n1. Install `@babel/preset-typescript`\n\n```bash\nnpm install --save-dev @babel/preset-typescript\n```\n\nYou may also want to add `typescript @types/node @types/aws-lambda`.\n\n2. Create a custom `.babelrc` file:\n\n```diff\n{\n  \"presets\": [\n    \"@babel/preset-typescript\",\n    \"@babel/preset-env\"\n  ],\n  \"plugins\": [\n    \"@babel/plugin-proposal-class-properties\",\n    \"@babel/plugin-transform-object-assign\",\n    \"@babel/plugin-proposal-object-rest-spread\"\n  ]\n}\n```\n\n3. (Optional) if you have `@types/aws-lambda` installed, your lambda functions can use the community typings for `Handler, Context, Callback`. See the typescript instructions in [create-react-app-lambda](https://github.com/netlify/create-react-app-lambda/blob/master/README.md#typescript) for an example.\n\nCheck https://github.com/sw-yx/create-react-app-lambda-typescript for a CRA + Lambda full Typescript experience.\n\n## CLI flags/options\n\nThere are additional CLI options:\n\n```bash\n-h --help\n-c --config\n-p --port\n-s --static\n-t --timeout\n-b --babelrc\n```\n\n### --config option\n\nIf you need to use additional webpack modules or loaders, you can specify an additional webpack config with the `-c`/`--config` option when running either `serve` or `build`.\n\nFor example, have a file with:\n\n```js\n// webpack.functions.js\nmodule.exports = {\n  optimization: { minimize: false }\n};\n```\n\nThen specify `netlify-lambda serve --config ./webpack.functions.js`.\n\n### --timeout option\n\n(This is for local dev/serving only) The default function timeout is 10 seconds. If you need to adjust this because you have requested extra timeout, pass a timeout number here. Thanks to [@naipath](https://github.com/netlify/netlify-lambda/pull/116) for this feature.\n\n### --port option\n\nThe serving port can be changed with the `-p`/`--port` option.\n\n### --static option\n\nIf you need an escape hatch and are building your lambda in some way that is incompatible with our build process, you can skip the build with the `-s` or `--static` flag. [More info here](https://github.com/netlify/netlify-lambda/pull/62).\n\n### --babelrc\n\nDefaults to `true`\n\nUse a `.babelrc` found in the directory `netlify-lambda` is run from. This can be useful when you have conflicting babel-presets, more info [here](#babel-configuration)\n\n## Netlify Identity\n\nMake sure to [read the docs](https://www.netlify.com/docs/functions/#identity-and-functions?utm_source=github&utm_medium=swyx-netlify-lambda&utm_campaign=devex) on how Netlify Functions and Netlify Identity work together. Basically you have to make your request with an `authorization` header and a `Bearer` token with your Netlify Identity JWT supplied. You can get this JWT from any of our Identity solutions from [gotrue-js](https://github.com/netlify/gotrue-js) to [netlify-identity-widget](https://github.com/netlify/netlify-identity-widget).\n\nSince for practical purposes we cannot fully emulate Netlify Identity locally, we provide [simple JWT decoding inside the `context` of your function](https://github.com/netlify/netlify-lambda/pull/57). This will give you back the `user` info you need to work with.\n\nMinor note: For the `identity` field, since we are not fully emulating Netlify Identity, we can't give you details on the Identity instance, so we give you [unambiguous strings](https://github.com/netlify/netlify-lambda/blob/master/lib/serve.js#L87) so you know not to rely on it locally: `NETLIFY_LAMBDA_LOCALLY_EMULATED_IDENTITY_URL` and `NETLIFY_LAMBDA_LOCALLY_EMULATED_IDENTITY_TOKEN`. In production, of course, Netlify Functions will give you the correct `identity.url` and `identity.token` fields. We find we dont use this info often in our functions so it is not that big of a deal in our judgment.\n\n## Debugging\n\nTo debug lambdas, it can be helpful to turn off minification and enable logging. Prepend the `serve` command with [npm's package runner npx](https://medium.com/@maybekatz/introducing-npx-an-npm-package-runner-55f7d4bd282b), e.g. `npx --node-arg=--inspect netlify-lambda serve ...`.\n\n1. make sure that sourcemaps are built along the way (e.g. in the webpack configuration and the `tsconfig.json` if typescript is used)\n2. webpack's minification/uglification is turned off (see below):\n\nFor example, to customize the webpack config you can have a file with:\n\n```js\n// webpack.functions.js\nmodule.exports = {\n  optimization: { minimize: false }\n};\n```\n\nYou can see [a sample project with this setup here](https://github.com/sw-yx/throwaway-test-netlify-lambda).\n\nSo you can run something like `npx --node-arg=--inspect netlify-lambda serve --config ./webpack.functions.js`. If using VSCode, it is likely that the `sourceMapPathOverrides` have to be adapted for breakpoints to work. Read here for more info on [how to modify the webpack config](https://github.com/netlify/netlify-lambda/issues/64#issuecomment-429625191).\n\nNetlify Functions [run in Node v8.10](https://www.netlify.com/blog/2018/04/03/node.js-8.10-now-available-in-netlify-functions/?utm_source=github&utm_medium=swyx-netlify-lambda&utm_campaign=devex) and you may need to run the same version to mirror the environment locally. Also make sure to check that you aren't [committing one of these common Node 8 mistakes in Lambda!](https://serverless.com/blog/common-node8-mistakes-in-lambda/)\n\n**Special warning on `node-fetch`**: `node-fetch` and webpack [currently don't work well together](https://github.com/bitinn/node-fetch/issues/450). You will have to use the default export in your code:\n\n```js\nconst fetch = require(\"node-fetch\").default; // not require('node-fetch')\n```\n\nDon't forget to search our issues in case someone has run into a similar problem you have!\n\n## Example functions and Tutorials\n\nYou can do a great deal with lambda functions! Here are some examples for inspiration:\n\n- Basic Netlify Functions tutorial: https://flaviocopes.com/netlify-functions/\n- Netlify's list of Function examples: https://functions-playground.netlify.com/ ([Even more in the README](https://github.com/netlify/functions) as well as our full list https://functions.netlify.com/examples/)\n- Slack Notifications: https://css-tricks.com/forms-auth-and-serverless-functions-on-gatsby-and-netlify/#article-header-id-9\n- URL Shortener: https://www.netlify.com/blog/2018/03/19/create-your-own-url-shortener-with-netlifys-forms-and-functions/\n- Gatsby + Netlify Identity + Functions: [Turning the Static Dynamic: Gatsby + Netlify Functions + Netlify Identity](https://www.gatsbyjs.org/blog/2018-12-17-turning-the-static-dynamic/)\n- Raymond Camden's [Adding Serverless Functions to Your Netlify Static Site](https://www.raymondcamden.com/2019/01/08/adding-serverless-functions-to-your-netlify-static-site)\n- Travis Horn's [Netlify Lambda Functions from Scratch](https://travishorn.com/netlify-lambda-functions-from-scratch-1186f61c659e)\n- [JAMstack with Divya Sasidharan & Phil Hawksworth | Devchat.tv](https://devchat.tv/js-jabber/jsj-347-jamstack-with-divya-sasidharan-phil-hawksworth/) - Great discussion on the problems that Netlify Functions solve\n- [Netlify function error reporting with Sentry](https://httptoolkit.tech/blog/netlify-function-error-reporting-with-sentry/) - automatic error reporting for your Netlify functions, so you know any time they fail.\n- React + Stripe + Netlify Functions: [Build and deploy a serverless eCommerce project](https://mitchgavan.com/react-serverless-shop/)\n- [**Submit your blogpost here!**](https://github.com/netlify/netlify-lambda/issues/new)\n\nThese libraries pair very well for extending your functions capability:\n\n- Middleware: https://github.com/middyjs/middy\n- GraphQL: https://www.npmjs.com/package/apollo-server-lambda\n- [Any others to suggest?](https://github.com/netlify/netlify-lambda/issues/new)\n\n## Other community approaches\n\nIf you wish to serve the full website from lambda, [check this issue](https://github.com/netlify/netlify-lambda/issues/36).\n\nIf you wish to run this server for testing, [check this issue](https://github.com/netlify/netlify-lambda/issues/49).\n\nIf you wish to emulate more Netlify functionality locally, check this repo: https://github.com/8eecf0d2/netlify-local. We are considering merging the projects [here](https://github.com/netlify/netlify-lambda/issues/75).\n\nAll of the above are community maintained and not officially supported by Netlify.\n\n## Changelog\n\n- v1.0: https://twitter.com/Netlify/status/1050399820484087815 Webpack 4 and Babel 7\n- v1.1: https://twitter.com/swyx/status/1069544181259849729 Typescript support\n- v1.2: https://twitter.com/swyx/status/1083446733374337024 Identity emulation (& others)\n- v1.3: https://github.com/netlify/netlify-lambda/releases/tag/v1.3.0\n- v1.4: New timeout feature https://github.com/netlify/netlify-lambda/pull/116\n- v1.5: Catch raw requests - a very common error for first time users pinging `localhost:9000` instead of `localhost:9000/.netlify/functions/myfunction` https://github.com/netlify/netlify-lambda/commit/bfebc0921a45d4f730b910b680e40e04928f7c29#diff-3288939317efd62bfc509440d662cacaR191\n- v1.6: New `install` command https://mobile.twitter.com/swyx/status/1162038490298818562 \n\n## License\n\n[MIT](LICENSE)\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/netlify/netlify-lambda.git"
  },
  "scripts": {
    "format": "prettier --write 'lib/**/*.js' 'bin/**/*.js'",
    "format:ci": "prettier --check 'lib/**/*.js' 'bin/**/*.js'",
    "lint": "eslint 'lib/**/*.js' 'bin/**/*.js'",
    "prepublishOnly": "git push && git push --tags && gh-release",
    "test": "jest",
    "version": "auto-changelog -p --template keepachangelog && git add ."
  },
  "version": "2.0.1"
}
